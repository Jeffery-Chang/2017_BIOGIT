"use strict";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},new Vue({el:"#indexPage",data:{menuHeader:!1,goldFG:!1,goldStep:1,purpleFG:!1,purpleStep:1,switchCnt:0,actFG:!1,gaV3:!0,gaV5:!0,gaV6:!0,goldData:{name:"",phone:"",address:"",gift:"A"},purpleData:{name:"",phone:"",address:"",gift:"B"}},created:function(){window.addEventListener("scroll",this.ctrlScroll)},beforeMount:function(){isMobile.phone&&(this.switchCnt=2)},mounted:function(){this.initKV(),this.initEasy(),this.initPatent(),this.initProduct(),this.initForm(),gapage("homepage")},methods:{ctrlScroll:function(){this.menuHeader=window.scrollY>0;var e=document.querySelector(".famous").offsetTop-document.querySelector(".famous").offsetHeight;1==this.gaV3&&window.scrollY>e&&(gapage("V3"),this.gaV3=!1)},setOverFlow:function(){1==this.goldFG||1==this.purpleFG||1==this.actFG?document.body.style.cssText="overflow-y: hidden":document.body.style.cssText=""},moveToPdt:function(){var e=document.querySelector(".bg_2").offsetTop;this.scrollToY(e,500),isMobile.phone&&document.querySelector(".menuToggle input").click(),gaclick("product")},initKV:function(){new WOW({boxClass:"index_kv",offset:0,delay:2,callback:function(){}}).init();if(!isMobile.phone){var e=document.querySelectorAll(".one"),t=document.querySelectorAll(".two"),o=document.querySelectorAll(".one, .two"),a=[".1",".3",".2",".5",".1"],n=["2","1.75","2.25","2","1.75"];TweenMax.from(e,.5,{scale:0,delay:1,onComplete:function(){TweenMax.set(e,{clearProps:"all"})}}),TweenMax.from(t,.5,{scale:0,delay:1.25,onComplete:function(){TweenMax.set(t,{clearProps:"all"});for(var e=0;e<o.length;e++)o[e].style="animation: float "+n[e]+"s ease infinite; animation-delay: "+a[e]+"s"}})}},initEasy:function(){var e=document.querySelectorAll(".easy h1 p img, .easy h1 span, .easy h2 img"),t=document.querySelectorAll(".bubble_block li p"),o=[t[3],t[2],t[1],t[0]],a=new TimelineMax({paused:!0}),n=TweenMax.staggerTo(e,.5,{opacity:1,y:0,delay:.5},.2,function(){TweenMax.set(e,{clearProps:"all"})}),l=TweenMax.staggerTo(o,.5,{scale:1},.2,function(){TweenMax.set(o,{clearProps:"all"})});a.add(n),a.add(l),TweenMax.set(e,{opacity:0,y:-50}),TweenMax.set(o,{scale:0});new WOW({boxClass:"easy_kv",offset:200,callback:function(){a.play(),gapage("V1")}}).init()},initPatent:function(){var e=document.querySelectorAll(".text_block h1, .text_block h2, .text_block h3, .text_block .video"),t=isMobile.phone?"patent_kv_m":"patent_kv_pc",o=document.querySelector(".text_block .video");TweenMax.set(e,{opacity:0,y:-50}),WAMediaBox.bindAll(o);new WOW({boxClass:t,offset:200,delay:.5,callback:function(){gapage("V2"),TweenMax.staggerTo(e,.5,{opacity:1,y:0},.2,function(){TweenMax.set(e,{clearProps:"all"})})}}).init()},initProduct:function(){var e=document.querySelector(".pdt_block h1 img");if(e.classList.add("product_kv"),e.classList.add("fadeInDown"),e.setAttribute("data-wow-duration",".5s"),isMobile.phone){var t=document.querySelector(".pdt_block .gold_block"),o=document.querySelector(".pdt_block .purple_block"),a=document.querySelectorAll(".pdt_block .m_pdtBlock .open")[0],n=document.querySelectorAll(".pdt_block .m_pdtBlock .open")[1];t.classList.add("product_kv_g"),t.classList.add("fadeInDownSmall"),t.setAttribute("data-wow-duration",".5s"),o.classList.add("product_kv_p"),o.setAttribute("data-wow-duration",".5s"),o.classList.add("fadeInDownSmall"),TweenMax.set([a,n],{height:0,overflow:"hidden"});new WOW({boxClass:"product_kv",offset:300,delay:.1,callback:function(){gapage("V4")}}).init(),new WOW({boxClass:"product_kv_g",offset:300,delay:.1}).init(),new WOW({boxClass:"product_kv_p",offset:300,delay:.1}).init()}else{var l=document.querySelector(".cut_block.c_1"),c=document.querySelector(".cut_block.c_2"),i=document.querySelector(".pdt_block .triggle img"),s=document.querySelector(".pdt_block .gold img"),d=document.querySelector(".pdt_block .bubble_gold img"),r=document.querySelector(".pdt_block .purple img"),u=document.querySelector(".pdt_block .bubble_purple img"),p=new TimelineMax({paused:!0,delay:.5}),m=TweenMax.to(i,.75,{scale:1,delay:.25}),w=TweenMax.to([s,r],.75,{opacity:1,x:0,delay:.25}),h=TweenMax.to([d,u],.75,{opacity:1,x:0,y:0,scale:1,delay:.25}),g=TweenMax.to(l,.75,{opacity:0,delay:.75,onComplete:function(){TweenMax.set(l,{display:"none"}),TweenMax.set(c,{display:"block"})}}),y=TweenMax.to(c,.75,{opacity:1});p.add(m),p.add(w),p.add(h),p.add(g),p.add(y),TweenMax.set(i,{scale:0}),TweenMax.set(s,{opacity:0,x:-50}),TweenMax.set(r,{opacity:0,x:50}),TweenMax.set(d,{opacity:0,x:75,y:75,scale:.5}),TweenMax.set(u,{opacity:0,x:-100,y:-100,scale:.5}),TweenMax.set(c,{opacity:0});new WOW({boxClass:"product_kv",offset:300,delay:.1,callback:function(){gapage("V4"),p.play()}}).init()}},initForm:function(){var e=this,t=document.querySelector(".lottery h1 img"),o=document.querySelector(".lottery h2"),a=document.querySelector(".lottery h3"),n=document.querySelector(".lottery .choose_block"),l=document.querySelector(".lottery .gold_box img"),c=document.querySelector(".lottery .purple_box img"),i=new TimelineMax({paused:!0,delay:.55}),s=TweenMax.to(n,.5,{opacity:1}),d=TweenMax.to([l,c],.5,{opacity:1,x:0});i.add(s),i.add(d),TweenMax.set([n,l,c],{opacity:0}),TweenMax.set(l,{x:-50}),TweenMax.set(c,{x:50}),t.classList.add("form_kv"),t.classList.add("fadeInDown"),t.setAttribute("data-wow-duration",".5s"),o.classList.add("form_kv"),o.classList.add("fadeInDown"),o.setAttribute("data-wow-duration",".5s"),a.classList.add("form_kv"),a.classList.add("fadeInDown"),a.setAttribute("data-wow-duration",".5s");new WOW({boxClass:"form_kv",offset:300,delay:.1,callback:function(){1==e.gaV5&&(gapage("V5"),e.gaV5=!1,i.play())}}).init()},disAct:function(e){e.preventDefault(),this.actFG=!0,this.$nextTick(function(){1==this.gaV6&&(gapage("V6"),this.gaV6=!1)}),gaclick("rule")},disImg:function(e,t){e.preventDefault();var o="gold"===t?document.querySelectorAll(".pdt_block .m_pdtBlock .open")[0]:document.querySelectorAll(".pdt_block .m_pdtBlock .open")[1],a="gold"===t?document.querySelectorAll(".pdt_block .m_pdtBlock .open img")[0].offsetHeight:document.querySelectorAll(".pdt_block .m_pdtBlock .open img")[1].offsetHeight;TweenMax.to(o,.5,{height:0===o.offsetHeight?a:"0px"}),"gold"===t?gaclick("gold"):gaclick("bounce")},sendShare:function(e){e.preventDefault(),this.shareFB(location.href,"?back=1")},sendData:function(e,t){var o=this;e&&e.preventDefault();var a="",n=!1,l="";"gold"===t?(n=document.getElementById("checkbox").checked,CH.checktxt(this.goldData.name)||(a+="請填寫您的姓名\n"),CH.isValidCell(this.goldData.phone)||(a+="請填寫10碼的手機號碼(格式 0912345678)\n"),CH.checktxt(this.goldData.address)||(a+="請填寫您的地址\n"),n||(a+="請詳閱約定事項並同意"),l=this.goldData):"purple"===t&&(n=document.getElementById("checkbox_2").checked,CH.checktxt(this.purpleData.name)||(a+="請填寫您的姓名\n"),CH.isValidCell(this.purpleData.phone)||(a+="請填寫10碼的手機號碼(格式 0912345678)\n"),CH.checktxt(this.purpleData.address)||(a+="請填寫您的地址\n"),n||(a+="請詳閱約定事項並同意"),l=this.purpleData),a.length>0?alert(a):axios({method:"post",url:"api/Send_User",data:l}).then(function(e){console.log(e),"200"===e.data.status?"gold"===t?(o.goldStep=2,gaclick("biogoldenter")):"purple"===t&&(o.purpleStep=2,gaclick("biobounceenter")):"110"===e.data.status?"gold"===t?(o.goldStep=3,gaclick("biogoldenter")):"purple"===t&&(o.purpleStep=3,gaclick("biobounceenter")):alert("資料傳送錯誤，請重新再試！")})},shareFB:function(e,t){var o,a=isMobile.phone?"http://m.facebook.com/sharer.php?u=":"http://www.facebook.com/sharer.php?u=";o=e+(t||""),window.open(a+encodeURIComponent(o),"sharer","toolbar=0,status=0,width=656,height=436")},scrollToY:function(e,t,o){function a(){var t=(l+=1/60)/c,s=i[o](t);t<1?(requestAnimFrame(a),window.scrollTo(0,n+(e-n)*s)):window.scrollTo(0,e)}var n=window.scrollY||document.documentElement.scrollTop,e=e||0,t=t||2e3,o=o||"easeOutSine",l=0,c=Math.max(.1,Math.min(Math.abs(n-e)/t,.8)),i={easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)}};a()}},destroyed:function(){window.removeEventListener("scroll",this.ctrlScroll)},watch:{goldFG:"setOverFlow",purpleFG:"setOverFlow",actFG:"setOverFlow"}});