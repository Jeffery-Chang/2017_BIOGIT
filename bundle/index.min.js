window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},new Vue({el:"#indexPage",data:{menuHeader:!1,goldFG:!1,goldStep:1,purpleFG:!1,purpleStep:1,switchCnt:0,actFG:!1,goldData:{name:"",phone:"",address:"",gift:"A"},purpleData:{name:"",phone:"",address:"",gift:"B"}},created:function(){window.addEventListener("scroll",this.ctrlScroll)},beforeMount:function(){isMobile.phone&&(this.switchCnt=2)},mounted:function(){this.initKV(),this.initEasy(),this.initPatent(),this.initProduct(),this.initForm()},methods:{ctrlScroll:function(){this.menuHeader=window.scrollY>0},setOverFlow:function(){1==this.goldFG||1==this.purpleFG||1==this.actFG?document.body.style.cssText="overflow-y: hidden":document.body.style.cssText=""},introPdt:function(){var e=document.querySelector(".bg_2").offsetTop;this.scrollToY(e,500),isMobile.phone&&document.querySelector(".menuToggle input").click()},initKV:function(){new WOW({boxClass:"index_kv",offset:0,delay:2,callback:function(){}}).init();if(!isMobile.phone){var e=document.querySelectorAll(".one"),t=document.querySelectorAll(".two"),o=document.querySelectorAll(".one, .two"),a=[".1",".3",".2",".5",".1"],n=["2","1.75","2.25","2","1.75"];TweenMax.from(e,.5,{scale:0,delay:1,onComplete:function(){TweenMax.set(e,{clearProps:"all"})}}),TweenMax.from(t,.5,{scale:0,delay:1.25,onComplete:function(){TweenMax.set(t,{clearProps:"all"});for(var e=0;e<o.length;e++)o[e].style="animation: float "+n[e]+"s ease infinite; animation-delay: "+a[e]+"s"}})}},initEasy:function(){var e=document.querySelectorAll(".easy h1 p img, .easy h1 span, .easy h2 img"),t=document.querySelectorAll(".bubble_block li p"),o=[t[3],t[2],t[1],t[0]],a=new TimelineMax({paused:!0}),n=TweenMax.staggerTo(e,.5,{opacity:1,y:0,delay:.5},.2,function(){TweenMax.set(e,{clearProps:"all"})}),l=TweenMax.staggerTo(o,.5,{scale:1},.2,function(){TweenMax.set(o,{clearProps:"all"})});a.add(n),a.add(l),TweenMax.set(e,{opacity:0,y:-50}),TweenMax.set(o,{scale:0});new WOW({boxClass:"easy_kv",offset:200,callback:function(){a.play()}}).init()},initPatent:function(){var e=document.querySelectorAll(".text_block h1, .text_block h2, .text_block h3, .text_block .video"),t=isMobile.phone?"patent_kv_m":"patent_kv_pc";TweenMax.set(e,{opacity:0,y:-50});new WOW({boxClass:t,offset:200,delay:.5,callback:function(){TweenMax.staggerTo(e,.5,{opacity:1,y:0},.2,function(){TweenMax.set(e,{clearProps:"all"})})}}).init()},initProduct:function(){var e=document.querySelector(".pdt_block h1 img");if(e.classList.add("product_kv"),e.classList.add("fadeInDown"),e.setAttribute("data-wow-duration",".5s"),isMobile.phone){var t=document.querySelector(".pdt_block .gold_block"),o=document.querySelector(".pdt_block .purple_block"),a=document.querySelectorAll(".pdt_block .m_pdtBlock .open")[0],n=document.querySelectorAll(".pdt_block .m_pdtBlock .open")[1];t.classList.add("product_kv_g"),t.classList.add("fadeInDownSmall"),t.setAttribute("data-wow-duration",".5s"),o.classList.add("product_kv_p"),o.setAttribute("data-wow-duration",".5s"),o.classList.add("fadeInDownSmall"),TweenMax.set([a,n],{height:0,overflow:"hidden",transition:"height .5s ease"});new WOW({boxClass:"product_kv",offset:300,delay:.1}).init(),new WOW({boxClass:"product_kv_g",offset:300,delay:.1}).init(),new WOW({boxClass:"product_kv_p",offset:300,delay:.1}).init()}else{var l=document.querySelector(".cut_block.c_1"),c=document.querySelector(".cut_block.c_2"),i=document.querySelector(".pdt_block .triggle img"),s=document.querySelector(".pdt_block .gold img"),d=document.querySelector(".pdt_block .bubble_gold img"),r=document.querySelector(".pdt_block .purple img"),u=document.querySelector(".pdt_block .bubble_purple img"),p=new TimelineMax({paused:!0,delay:.5}),w=TweenMax.to(i,.75,{scale:1,delay:.25}),y=TweenMax.to([s,r],.75,{opacity:1,x:0,delay:.25}),m=TweenMax.to([d,u],.75,{opacity:1,x:0,y:0,scale:1,delay:.25}),h=TweenMax.to(l,.75,{opacity:0,delay:.75,onComplete:function(){TweenMax.set(l,{display:"none"}),TweenMax.set(c,{display:"block"})}}),f=TweenMax.to(c,.75,{opacity:1});p.add(w),p.add(y),p.add(m),p.add(h),p.add(f),TweenMax.set(i,{scale:0}),TweenMax.set(s,{opacity:0,x:-50}),TweenMax.set(r,{opacity:0,x:50}),TweenMax.set(d,{opacity:0,x:75,y:75,scale:.5}),TweenMax.set(u,{opacity:0,x:-100,y:-100,scale:.5}),TweenMax.set(c,{opacity:0});new WOW({boxClass:"product_kv",offset:300,delay:.1,callback:function(){p.play()}}).init()}},initForm:function(){var e=document.querySelector(".lottery h1 img"),t=document.querySelector(".lottery h2"),o=document.querySelector(".lottery h3"),a=document.querySelector(".lottery .choose_block"),n=document.querySelector(".lottery .gold_box img"),l=document.querySelector(".lottery .purple_box img"),c=new TimelineMax({paused:!0,delay:.55}),i=TweenMax.to(a,.5,{opacity:1}),s=TweenMax.to([n,l],.5,{opacity:1,x:0});c.add(i),c.add(s),TweenMax.set([a,n,l],{opacity:0}),TweenMax.set(n,{x:-50}),TweenMax.set(l,{x:50}),e.classList.add("form_kv"),e.classList.add("fadeInDown"),e.setAttribute("data-wow-duration",".5s"),t.classList.add("form_kv"),t.classList.add("fadeInDown"),t.setAttribute("data-wow-duration",".5s"),o.classList.add("form_kv"),o.classList.add("fadeInDown"),o.setAttribute("data-wow-duration",".5s");new WOW({boxClass:"form_kv",offset:300,delay:.1,callback:function(){c.play()}}).init()},sendData:function(e,t){e&&e.preventDefault();var o="",a=!1;"gold"===t?(a=document.getElementById("checkbox").checked,CH.checktxt(this.goldData.name)||(o+="請填寫您的姓名\n"),CH.isValidCell(this.goldData.phone)||(o+="請填寫10碼的手機號碼(格式 0912345678)\n"),CH.checktxt(this.goldData.address)||(o+="請填寫您的地址\n"),a||(o+="請詳閱約定事項並同意"),this.goldData):"purple"===t&&(a=document.getElementById("checkbox_2").checked,CH.checktxt(this.purpleData.name)||(o+="請填寫您的姓名\n"),CH.isValidCell(this.purpleData.phone)||(o+="請填寫10碼的手機號碼(格式 0912345678)\n"),CH.checktxt(this.purpleData.address)||(o+="請填寫您的地址\n"),a||(o+="請詳閱約定事項並同意"),this.purpleData),o.length>0?alert(o):(console.log("send"),"gold"===t?this.goldStep=2:"purple"===t&&(this.purpleStep=2))},scrollToY:function(e,t,o){function a(){var t=(l+=1/60)/c,s=i[o](t);t<1?(requestAnimFrame(a),window.scrollTo(0,n+(e-n)*s)):window.scrollTo(0,e)}var n=window.scrollY||document.documentElement.scrollTop,e=e||0,t=t||2e3,o=o||"easeOutSine",l=0,c=Math.max(.1,Math.min(Math.abs(n-e)/t,.8)),i={easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)}};a()}},destroyed:function(){window.removeEventListener("scroll",this.ctrlScroll)},watch:{goldFG:"setOverFlow",purpleFG:"setOverFlow",actFG:"setOverFlow"}});